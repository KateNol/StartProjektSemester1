[gd_scene load_steps=18 format=2]

[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-4.png" type="Texture" id=1]
[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-6.png" type="Texture" id=2]
[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-1.png" type="Texture" id=3]
[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-3.png" type="Texture" id=4]
[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-2.png" type="Texture" id=5]
[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-5.png" type="Texture" id=6]
[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-7.png" type="Texture" id=7]
[ext_resource path="res://assets/actors/Enemy1/walk/skeleton-8.png" type="Texture" id=8]
[ext_resource path="res://assets/actors/Enemy1/dead/enemy-death-2.png" type="Texture" id=9]
[ext_resource path="res://assets/actors/Enemy1/dead/enemy-death-3.png" type="Texture" id=10]
[ext_resource path="res://assets/actors/Enemy1/dead/enemy-death-4.png" type="Texture" id=11]
[ext_resource path="res://assets/actors/Enemy1/dead/enemy-death-5.png" type="Texture" id=12]
[ext_resource path="res://assets/actors/Enemy1/dead/enemy-death-1.png" type="Texture" id=13]

[sub_resource type="GDScript" id=1]
script/source = "extends KinematicBody2D

const GRAVITY = 400
const SPEED = -30
const JUMP_POWER = 150
const UP_VECTOR = Vector2(0, -1)

onready var sprite = $AnimatedSprite

var movement = Vector2(SPEED, 0)
var is_alive = true

func _ready():
	sprite.play(\"walk\")
	pass

func _physics_process(delta):
	if is_alive == false:
		return

	movement.y += GRAVITY * delta

	if is_on_floor():
		movement.y = 0

	move_and_slide_with_snap(movement, Vector2(0, 1), UP_VECTOR)

	if is_on_wall():
		#sprite.play(\"dead\")
		movement.x *= -1
		sprite.flip_h = !sprite.flip_h



func on_stomp():
	$CollisionShape2D.disabled = true
	$\"Stomp Hitbox/CollisionShape2D\".disabled = true
	$Hitbox/CollisionShape2D.disabled = true
	
	sprite.play(\"dead\")
	is_alive  = false

func _on_AnimatedSprite_animation_finished():
	if sprite.animation == \"dead\":
		queue_free()


func _on_Hitbox_area_entered(area):
	pass # Replace with function body.


func _on_Hitbox_body_entered(body: PhysicsBody2D):
	if(body != null):
		if(body.is_in_group(\"PlayerWeapon\")):
			on_stomp()

	
"

[sub_resource type="SpriteFrames" id=2]
animations = [ {
"frames": [ ExtResource( 13 ), ExtResource( 13 ), ExtResource( 13 ), ExtResource( 9 ), ExtResource( 10 ), ExtResource( 11 ), ExtResource( 12 ) ],
"loop": true,
"name": "dead",
"speed": 5.0
}, {
"frames": [ ExtResource( 3 ), ExtResource( 5 ), ExtResource( 4 ), ExtResource( 1 ), ExtResource( 6 ), ExtResource( 8 ), ExtResource( 7 ), ExtResource( 2 ) ],
"loop": true,
"name": "walk",
"speed": 5.0
} ]

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 13.047, 21.9073 )

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 14.8246, 3.38391 )

[node name="Node2D" type="Node2D"]

[node name="Enemy1" type="KinematicBody2D" parent="."]
collision_layer = 3
collision_mask = 0
script = SubResource( 1 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="Enemy1"]
position = Vector2( 0.18729, 0 )
frames = SubResource( 2 )
animation = "dead"
frame = 1
playing = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy1"]
position = Vector2( 0, 2.07383 )
shape = SubResource( 3 )

[node name="Stomp Hitbox" type="Area2D" parent="Enemy1"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy1/Stomp Hitbox"]
position = Vector2( 0, -20.9891 )
shape = SubResource( 4 )

[node name="Hitbox" type="Area2D" parent="Enemy1"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy1/Hitbox"]
position = Vector2( 0, 2.14765 )
shape = SubResource( 3 )

[connection signal="animation_finished" from="Enemy1/AnimatedSprite" to="Enemy1" method="_on_AnimatedSprite_animation_finished"]
[connection signal="body_entered" from="Enemy1/Hitbox" to="Enemy1" method="_on_Hitbox_body_entered"]
